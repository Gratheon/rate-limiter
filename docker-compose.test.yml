version: '3.8'

services:
  # Redis 6.x - LTS version
  redis-6:
    image: redis:6-alpine
    container_name: redis-test-6
    ports:
      - "6380:6379"
    command: redis-server --requirepass pass
    healthcheck:
      test: ["CMD", "redis-cli", "-a", "pass", "ping"]
      interval: 5s
      timeout: 3s
      retries: 5

  # Redis 7.x - Latest stable
  redis-7:
    image: redis:7-alpine
    container_name: redis-test-7
    ports:
      - "6381:6379"
    command: redis-server --requirepass pass
    healthcheck:
      test: ["CMD", "redis-cli", "-a", "pass", "ping"]
      interval: 5s
      timeout: 3s
      retries: 5

  # Redis 8.x - Edge/Latest
  redis-8:
    image: redis:8-rc-alpine
    container_name: redis-test-8
    ports:
      - "6382:6379"
    command: redis-server --requirepass pass
    healthcheck:
      test: ["CMD", "redis-cli", "-a", "pass", "ping"]
      interval: 5s
      timeout: 3s
      retries: 5
